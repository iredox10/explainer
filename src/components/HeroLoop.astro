---
interface Props {
    headline: string;
    subhead: string;
    videoUrl?: string;
    leftVideoUrl?: string;
    rightVideoUrl?: string;
    ambientAudioUrl?: string;
}

const { headline, subhead, videoUrl, leftVideoUrl, rightVideoUrl, ambientAudioUrl } = Astro.props;

const isSplit = leftVideoUrl && rightVideoUrl;
---

<div class="relative h-screen w-full overflow-hidden bg-black">
    {isSplit ? (
        <div class="absolute inset-0 flex h-full w-full">
            <div class="relative w-1/2 h-full overflow-hidden border-r border-white/10">
                <video
                    class="absolute inset-0 h-full w-full object-cover opacity-50"
                    autoplay
                    muted
                    loop
                    playsinline
                >
                    <source src={leftVideoUrl} type="video/mp4" />
                </video>
            </div>
            <div class="relative w-1/2 h-full overflow-hidden">
                <video
                    class="absolute inset-0 h-full w-full object-cover opacity-50"
                    autoplay
                    muted
                    loop
                    playsinline
                >
                    <source src={rightVideoUrl} type="video/mp4" />
                </video>
            </div>
        </div>
    ) : (
        videoUrl && (
            <video
                class="absolute inset-0 h-full w-full object-cover opacity-50"
                autoplay
                muted
                loop
                playsinline
            >
                <source src={videoUrl} type="video/mp4" />
            </video>
        )
    )}

    <!-- Ambient Audio Toggle (if provided) -->
    {ambientAudioUrl && (
        <div class="absolute top-32 right-6 md:right-12 z-50">
            <button
                id="hero-audio-toggle"
                data-audio-url={ambientAudioUrl}
                class="flex items-center gap-2 bg-black/50 backdrop-blur-md border border-white/20 px-4 py-2 rounded-full text-white hover:bg-[#FAFF00] hover:text-black transition-all group"
            >
                <div class="relative w-4 h-4">
                    <svg id="audio-off" class="absolute inset-0 w-full h-full" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 5L6 9H2v6h4l5 4V5zM22 9l-6 6M16 9l6 6"></path></svg>
                    <svg id="audio-on" class="absolute inset-0 w-full h-full opacity-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 5L6 9H2v6h4l5 4V5zM19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                </div>
                <span class="text-[10px] font-black uppercase tracking-widest hidden md:block">Ambient Sound</span>
            </button>
            <audio id="hero-ambient-audio" src={ambientAudioUrl} loop></audio>
        </div>
    )}

    <!-- Overlay Gradient -->
    <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/80"></div>

    <div class="relative z-10 flex h-full flex-col justify-center px-6 sm:px-12 lg:px-24">
        <div class="max-w-5xl">
            <div class="mb-6">
                <span class="bg-[#FAFF00] text-black px-3 py-1 text-xs font-black uppercase tracking-[0.2em]">
                    Featured Explainer
                </span>
            </div>
            
            <h1 class="font-serif-display text-6xl md:text-8xl lg:text-9xl font-black tracking-tighter text-white leading-[0.9] mb-8">
                {headline}
            </h1>
            
            <div class="flex flex-col md:flex-row items-start gap-6 md:items-center">
                <p class="text-xl md:text-2xl font-light text-gray-200 max-w-2xl leading-relaxed border-l-4 border-[#FAFF00] pl-6">
                    {subhead}
                </p>
                
                <button class="group flex items-center gap-3 px-8 py-4 bg-white text-black font-bold uppercase tracking-widest text-sm hover:bg-[#FAFF00] transition-colors duration-300">
                    <span>Explore Story</span>
                    <div class="w-6 h-6 rounded-full border border-black flex items-center justify-center group-hover:scale-110 transition-transform">
                        <svg class="w-3 h-3 fill-current" viewBox="0 0 24 24"><path d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                    </div>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Scroll Indicator -->
    <div class="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce text-white/50">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
    </div>
</div>

<script>
    const toggleBtn = document.getElementById('hero-audio-toggle');
    const audio = document.getElementById('hero-ambient-audio') as HTMLAudioElement;
    const offIcon = document.getElementById('audio-off');
    const onIcon = document.getElementById('audio-on');

    if (toggleBtn && audio) {
        toggleBtn.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
                offIcon?.classList.add('opacity-0');
                onIcon?.classList.remove('opacity-0');
                toggleBtn.classList.add('bg-[#FAFF00]', 'text-black');
            } else {
                audio.pause();
                offIcon?.classList.remove('opacity-0');
                onIcon?.classList.add('opacity-0');
                toggleBtn.classList.remove('bg-[#FAFF00]', 'text-black');
            }
        });
    }
</script>